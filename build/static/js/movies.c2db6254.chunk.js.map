{"version":3,"sources":["components/Searchbar/Searchbar.js","services/getQueryParams.js","views/Movies/Movies.js","services/apiService.js","components/Loader/Loader.js","components/Loader/loader.module.css","components/Searchbar/search-form.module.css","views/Movies/movies.module.css"],"names":["SearchBar","state","value","handleSubmit","event","preventDefault","props","onSubmit","setState","handleChange","currentTarget","className","styles","container","SearchForm","noValidate","autoComplete","this","Button","type","onClick","handleGoBack","variant","color","TextField","SearchForm_input","id","name","placeholder","onChange","Component","getQueryParams","qs","queryString","parse","Movies","movies","loading","fetchMovies","query","fetchMovieSearch","then","onChangeQuery","history","push","location","search","from","prevProps","prevState","prevQuery","nextQuery","match","title","list","map","overview","list__item","key","link","to","pathname","url","apiKey","a","axios","get","res","data","results","fetchPopularMovies","fetchMoiveOverview","fetchMovieCast","cast","fetchMovieReviews","Spinner","classname","height","width","module","exports"],"mappings":"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","file":"static/js/movies.c2db6254.chunk.js","sourcesContent":["import React, { Component } from \"react\";\nimport TextField from \"@material-ui/core/TextField\";\nimport Button from \"@material-ui/core/Button\";\nimport styles from \"./search-form.module.css\";\n\nexport class SearchBar extends Component {\n  state = {\n     value: \" \",\n  };\n\n  handleSubmit = (event) => {\n    event.preventDefault();\n    this.props.onSubmit(this.state.value);\n \n    this.setState({ value: \" \" });\n  }\n  handleChange = (event) => {\n  \n    this.setState({ value: event.currentTarget.value });\n\n  };\n\n  render() {\n    return (\n      <div className={styles.container}>\n        <form\n          className={styles.SearchForm}\n          noValidate\n          autoComplete=\"off\"\n          onSubmit={this.handleSubmit}\n        >\n          <Button\n            type=\"button\"\n            onClick={this.handleGoBack}\n            variant=\"contained\"\n            color=\"secondary\"\n          >\n            Search\n          </Button>\n\n          <TextField\n            className={styles.SearchForm_input}\n            id=\"standard-basic\"\n            type=\"text\"\n            name=\"query\"\n            value={this.state.value}\n            placeholder=\"Search\"\n            onChange={this.handleChange}\n          />\n        </form>\n      </div>\n    );\n  }\n}\n","\n\nimport queryString from \"query-string\";\n\nexport default  function getQueryParams(qs) {\n    return queryString.parse(qs)\n}\n\n","import React, { Component } from \"react\";\nimport { SearchBar } from \"../../components/Searchbar/Searchbar\";\nimport { Link } from \"react-router-dom\";\nimport styles from \"./movies.module.css\";\nimport {fetchMovieSearch} from \"../../services/apiService\"\nimport getQueryParams from \"../../services/getQueryParams\" \nimport Spinner from \"../../components/Loader/Loader\";\n\n\n\n\nclass Movies extends Component {\n  state = {\n    movies: [],\n    loading:false,\n  };\n  \n  componentDidMount() {\n    const { query } = getQueryParams(this.props.location.search);\n    if (query) {\n      this.fetchMovies(query);\n    }\n  }\n  componentDidUpdate(prevProps, prevState) {\n    const { query: prevQuery } = getQueryParams(prevProps.location.search);\n    const { query: nextQuery } = getQueryParams(this.props.location.search);\n    if (prevQuery !== nextQuery) {\n      this.fetchMovies(nextQuery);\n    }\n  }\n\n  fetchMovies = query => {\n  fetchMovieSearch(query)\n    .then((movies) => this.setState({ movies }))\n      \n  }\n\n  onChangeQuery = query => {\n   this.props.history.push({\n     ...this.props.location,\n     search: `query=${query}`,\n   });\n  };\n\n  handleGoBack = () => {\n    const { state } = this.props.location;\n\n    if (state && state.from) {\n       this.props.history.push(state.from);\n    }\n\n  };\n\n  render() {\n    const { movies,loading } = this.state;\n    const {match} = this.props\n\n    return (\n      <div>\n        <h1 className={styles.title}>Поиск фильмов</h1>\n        <SearchBar onSubmit={this.onChangeQuery} />\n        {loading && <Spinner />}\n        {movies && (\n          <ul className={styles.list}>\n            {movies.map(({ id, title, overview ,name}) => (\n              <li className={styles.list__item} key={id}>\n                <Link\n                  className={styles.link}\n                  to={{\n                    pathname: `${match.url}/${id}`,\n                    state: { from: this.props.location },\n                  }}\n                >\n                  {title || name}\n                </Link>\n              </li>\n            ))}\n          </ul>\n        )}\n      </div>\n    );\n  }\n}\n\nexport default Movies;\n","import axios from \"axios\";\nconst apiKey = \"add96bc16de760017b7a79136a2ecf18\";\n\nexport const fetchMovieSearch = async (query) => {\n  const res = await axios.get(\n    `https://api.themoviedb.org/3/search/movie?api_key=${apiKey}&query=${query}&language=en-US&page=1&include_adult=false`\n  );\n  return res.data.results;\n};\n\nexport const fetchPopularMovies =  axios.get(\n      `https://api.themoviedb.org/3/trending/all/day?api_key=${apiKey}`\n    );\n\nexport const fetchMoiveOverview =id => {\n   return axios\n      .get(\n        `https://api.themoviedb.org/3/movie/${id}?api_key=${apiKey}&language=en-US`\n      )\n      .then((res) => res.data);\n      \n}\n\nexport const fetchMovieCast = id => {\n    return axios\n      .get(`https://api.themoviedb.org/3/movie/${id}/credits?api_key=${apiKey}`)\n      .then((res) => res.data.cast);\n}\n\nexport const fetchMovieReviews = id => {\n    return axios.get(\n      `https://api.themoviedb.org/3/movie/${id}/reviews?api_key=${apiKey}`\n    ).then((res) => res.data.results)\n}","import React, { Component,} from \"react\";\nimport Loader from \"react-loader-spinner\";\nimport \"./loader.module.css\";\nclass Spinner extends Component {\n  //other logic\n  render() {\n    return (\n      <>\n      <Loader\n        classname=\"loader\"\n        type=\"TailSpin\"\n        color=\"#00BFFF\"\n        height={100}\n        width={100}\n        />\n        </>\n    );\n  }\n}\nexport default Spinner","// extracted by mini-css-extract-plugin\nmodule.exports = {\"loader\":\"loader_loader__3YnrM\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"SearchForm\":\"search-form_SearchForm__1NSlO\",\"container\":\"search-form_container__1xtKY\",\"SearchForm_input\":\"search-form_SearchForm_input__3fw-G\",\"Searchbar\":\"search-form_Searchbar__1gGB3\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"list\":\"movies_list__3q3n7\",\"list__item\":\"movies_list__item__1ImEJ\",\"link\":\"movies_link__1Na9H\",\"title\":\"movies_title__2Ef2O\"};"],"sourceRoot":""}